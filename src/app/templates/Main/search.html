{% extends 'base.html' %}

{% block title %}
<title>Search</title>
<link rel="stylesheet" href="../../static/css/search.css">
{% endblock %}

{% block content %}

<div>
    <form method="GET" action="{{ url_for('search_get') }}">
        <div class="search-container">
            <div class="search-div" style="width: 50%; margin: 40px auto 20px;">
                <div class="input-group">
                    <input type="text" name="search" class="form-control" id="search" placeholder="Search...">
                    <button type="submit" class="btn btn-primary" style="border: 2px solid #0d6efd ;">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="filters-container">
            <div class="hidden" id="args" style="justify-content: space-between; width: 50%; margin: auto;">
                <div class="row" style="margin: 10px auto;">
                    <input class="form-control" type="number" name="min_price" id="min_price" placeholder="Min price" style="width: 45%; margin: 9px;">
                    <input class="form-control" type="number" name="max_price" id="max_price" placeholder="Max price" style="width: 45%; margin: 9px;">
                </div>
                <div class="row" style="margin: 10px auto;">
                    <input class="form-control" type="text" name="brand" id="brand" placeholder="Brand" style="width: 30%;margin: 5px;">
                    <input class="form-control" type="number" min="0" max="5" step="0.1" name="min_rating" id="min_rating" placeholder="Min rating" style="width: 30%;margin: 5px;">
                    <input class="form-control" type="number" min="0" max="5" step="0.1" name="max_rating" id="max_rating" placeholder="Max rating" style="width: 30%;margin: 5px;">
                </div>
                <div class="row" style="margin: 10px auto;">
                    <a href="/search" class="clear-filters">
                        <button type="menu" class="btn btn-primary">
                            Clear filters
                        </button>
                    </a>
                </div>
                
            </div>
        </div>

    </form>
</div>
<div class="filters" style="width: 10%; margin: 10px auto;">
    <div>
        <button id="filters" type="menu" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
            Filters
        </button>
    </div>
</div>


<div id="products">
</div>




{% if products %}
<div style="text-align: center; margin: 20px auto 40px;">
    <div class="pagination">
        <ul class="pagination justify-content-center mx-auto mt-5">
            {% if products.has_prev %}
                <li class="page-item">
                    <a class="page-link" style="background: #ffffff;"  href="{{ url_for('search_get', page=products.prev_num, **params ) }}">Previous</a>
                </li>
            {% endif %}
            
            {% for num in products.iter_pages() %}
                {% if num %}
                    {% if products.page == num %}
                        <li class="page-item">
                            <a class="page-link current-page" href="{{ url_for('search_get', page=num, **params) }}">{{ num }}</a>
                        </li>
                    {% else %}
                        <li class="page-item">
                            <a class="page-link" style="background: #ffffff;" href="{{ url_for('search_get', page=num, **params) }}">{{ num }}</a>
                        </li>
                    {% endif %}
                {% else %}
                    <li class="page-item">
                        <span class="page-link" style="background: #ffffff;">...</span>
                    </li>
                {% endif %}
            {% endfor %}
            
            {% if products.has_next %}
                <li class="page-item">
                    <a class="page-link" style="background: #ffffff;" href="{{ url_for('search_get', page=products.next_num, **params) }}">Next</a>
                </li>
            {% endif %}
        </ul>
    </div>
</div>
{% endif %}

{% endblock %}


{% block scripts %}
<script type="text/javascript">
    var is_authenticated = "{{ current_user.is_authenticated }}";
    if (is_authenticated == 'True') {
        is_authenticated = true;
    } else {
        is_authenticated = false;
    }
</script>

<script type="text/javascript" src="../../static/js/image.js"></script>
<script type="text/javascript" src="../../static/js/track.js"></script>
<script type="text/javascript" src="../../static/js/products.js"></script>
{% endblock %}
